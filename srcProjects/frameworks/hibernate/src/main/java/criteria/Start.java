package criteria;import org.hibernate.Criteria;import org.hibernate.Session;import org.hibernate.criterion.DetachedCriteria;import org.hibernate.criterion.Restrictions;import org.hibernate.engine.spi.SessionFactoryImplementor;import org.hibernate.engine.spi.SessionImplementor;import org.hibernate.internal.CriteriaImpl;import org.hibernate.loader.criteria.CriteriaJoinWalker;import org.hibernate.loader.criteria.CriteriaQueryTranslator;import org.hibernate.persister.entity.OuterJoinLoadable;import java.util.List;/** * Created by Hiram on 2016/4/12. */public class Start {	public static void main(String[] args) {//		Session sess = null;//		Criteria add = sess.createCriteria(Start.class)//				.add(Restrictions.like("name", "Fritz%"))//				.add(Restrictions.or(//						Restrictions.eq("age", new Integer(0)),//						Restrictions.isNull("age")//				));		DetachedCriteria criteria = createMyCriteria();		System.out.println(criteria);	}	private static DetachedCriteria createMyCriteria() {		DetachedCriteria criteria = DetachedCriteria.forClass(Start.class);		criteria.add(Restrictions.like("name", "Fritz%"))						.add(Restrictions.or(								Restrictions.eq("age", new Integer(0)),								Restrictions.isNull("age")						));		return criteria;	}//	public static String getCriteriaSql(Criteria criteria) {//	    CriteriaImpl criteriaImpl = (CriteriaImpl) criteria;//转型//	    SessionImplementor session = criteriaImpl.getSession();//获取SESSION//	    SessionFactoryImplementor factory = session.getFactory();//获取FACTORY//	    CriteriaQueryTranslator translator = new CriteriaQueryTranslator(factory, criteriaImpl, criteriaImpl//	        .getEntityOrClassName(), CriteriaQueryTranslator.ROOT_SQL_ALIAS);//	    String[] implementors = factory.getImplementors(criteriaImpl.getEntityOrClassName());//	    CriteriaJoinWalker walker = new CriteriaJoinWalker((OuterJoinLoadable) factory//	        .getEntityPersister(implementors[0]), translator, factory, criteriaImpl, criteriaImpl//	        .getEntityOrClassName(), session.getEnabledFilters());//	    return walker.getSQLString();//	}}